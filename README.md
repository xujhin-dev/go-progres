# Golang Commercial-Grade REST API Template

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Gin**, **GORM (Postgres)**, **JWT** çš„ç°ä»£åŒ– Go åç«¯é¡¹ç›®æ¨¡æ¿ã€‚é‡‡ç”¨äº† **DDD (é¢†åŸŸé©±åŠ¨è®¾è®¡)** å’Œ **Clean Architecture (æ•´æ´æ¶æ„)** çš„æ€æƒ³è¿›è¡Œåˆ†å±‚ï¼Œä¸“ä¸ºå¯æ‰©å±•çš„å•†ç”¨é¡¹ç›®è®¾è®¡ã€‚

## ğŸš€ é¡¹ç›®ç‰¹æ€§

- **æ¨¡å—åŒ–æ¶æ„**ï¼šåŸºäº DDD çš„ç›®å½•ç»“æ„ï¼Œä¸šåŠ¡æ¨¡å—ï¼ˆå¦‚ `user`ï¼‰é«˜åº¦å†…èšï¼Œæ˜“äºæ‰©å±•æ–°ä¸šåŠ¡ï¼ˆå¦‚ `mall`, `order`ï¼‰ã€‚
- **RESTful API**ï¼šæ ‡å‡†åŒ–çš„ HTTP æ¥å£è®¾è®¡ã€‚
- **JWT è®¤è¯**ï¼šåŸºäº `golang-jwt` çš„æ— çŠ¶æ€è®¤è¯æœºåˆ¶ï¼Œé›†æˆä¸­é—´ä»¶ä¿æŠ¤è·¯ç”±ã€‚
- **é…ç½®ç®¡ç†**ï¼šä½¿ç”¨ `Viper` æ”¯æŒå¤šç¯å¢ƒé…ç½® (YAML + ç¯å¢ƒå˜é‡)ã€‚
- **ORM é›†æˆ**ï¼šä½¿ç”¨ `GORM` è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œæ”¯æŒè‡ªåŠ¨è¿ç§»ã€‚
- **ä¾èµ–æ³¨å…¥**ï¼šåœ¨å…¥å£å±‚æ‰‹åŠ¨ç»„è£…ä¾èµ–ï¼Œæ¸…æ™°ä¸”æ˜“äºæµ‹è¯•ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```
â”œâ”€â”€ cmd
â”‚   â””â”€â”€ server
â”‚       â””â”€â”€ main.go           # ğŸš€ é¡¹ç›®å…¥å£ï¼Œè´Ÿè´£ä¾èµ–ç»„è£…å’ŒæœåŠ¡å™¨å¯åŠ¨
â”œâ”€â”€ configs
â”‚   â””â”€â”€ config.yaml           # âš™ï¸ å…¨å±€é…ç½®æ–‡ä»¶
â”œâ”€â”€ internal
â”‚   â”œâ”€â”€ domain                # ğŸ“¦ ä¸šåŠ¡é¢†åŸŸ (æŒ‰æ¨¡å—åˆ’åˆ†)
â”‚   â”‚   â””â”€â”€ user              # [ç¤ºä¾‹] ç”¨æˆ·æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ handler       # HTTP å¤„ç†å±‚ (Controller)
â”‚   â”‚       â”œâ”€â”€ service       # ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic)
â”‚   â”‚       â”œâ”€â”€ repository    # æ•°æ®è®¿é—®å±‚ (DAO)
â”‚   â”‚       â”œâ”€â”€ model         # æ•°æ®æ¨¡å‹ (Entity)
â”‚   â”‚       â””â”€â”€ router.go     # æ¨¡å—è·¯ç”±æ³¨å†Œå…¥å£
â”‚   â””â”€â”€ pkg                   # ğŸ”’ å†…éƒ¨å…±äº«ç»„ä»¶ (ä»…é™é¡¹ç›®å†…éƒ¨ä½¿ç”¨)
â”‚       â”œâ”€â”€ config            # é…ç½®åŠ è½½é€»è¾‘
â”‚       â””â”€â”€ middleware        # å…¨å±€ä¸­é—´ä»¶ (å¦‚ Auth)
â”œâ”€â”€ pkg                       # ğŸŒ å…¬å…±åº“ (å¯è¢«å¤–éƒ¨å¼•ç”¨)
â”‚   â”œâ”€â”€ database              # æ•°æ®åº“è¿æ¥ä¸åˆå§‹åŒ–
â”‚   â””â”€â”€ utils                 # é€šç”¨å·¥å…· (å¦‚ JWT ç”Ÿæˆ)
â”œâ”€â”€ go.mod                    # ä¾èµ–ç®¡ç†
â””â”€â”€ README.md                 # é¡¹ç›®æ–‡æ¡£
```

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

- **Go**: 1.18+
- **PostgreSQL**: 12+

### 2. é…ç½®æ•°æ®åº“

ç¡®ä¿ PostgreSQL æ­£åœ¨è¿è¡Œï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼ˆé»˜è®¤é…ç½®åä¸º `postgres`ï¼‰ã€‚
ä¿®æ”¹ `configs/config.yaml` é€‚é…ä½ çš„æœ¬åœ°ç¯å¢ƒï¼š

```yaml
database:
  host: "localhost"
  port: "5432"
  user: "your_user"
  password: "your_password"
  dbname: "your_dbname"
```

### 3. è¿è¡Œé¡¹ç›®

```bash
# ä¸‹è½½ä¾èµ–
go mod tidy

# è¿è¡ŒæœåŠ¡å™¨
go run cmd/server/main.go
```

æœåŠ¡å™¨é»˜è®¤å¯åŠ¨åœ¨ `http://localhost:8080`ã€‚

## ğŸ”Œ API æ¥å£æ–‡æ¡£

### è®¤è¯æ¨¡å— (Auth)

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| POST | `/auth/register` | ç”¨æˆ·æ³¨å†Œ |
| POST | `/auth/login` | ç”¨æˆ·ç™»å½• (è¿”å› Token) |

**è¯·æ±‚ç¤ºä¾‹ (æ³¨å†Œ):**
```json
{
  "username": "testuser",
  "password": "password123",
  "email": "test@example.com"
}
```

### ç”¨æˆ·æ¨¡å— (User) - éœ€æºå¸¦ Bearer Token

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| GET | `/users/` | è·å–æ‰€æœ‰ç”¨æˆ· |
| GET | `/users/:id` | è·å–ç‰¹å®šç”¨æˆ· |
| PUT | `/users/:id` | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ |
| DELETE | `/users/:id` | åˆ é™¤ç”¨æˆ· |

**Header:**
```
Authorization: Bearer <your_token_here>
```

## ğŸ—ï¸ å¦‚ä½•æ‰©å±•æ–°æ¨¡å— (ä¾‹å¦‚ï¼šå•†åŸæ¨¡å—)

1.  åœ¨ `internal/domain/` ä¸‹åˆ›å»º `mall` ç›®å½•ã€‚
2.  å»ºç«‹æ ‡å‡†åˆ†å±‚ç›®å½•ï¼š`handler`, `service`, `repository`, `model`ã€‚
3.  å®ç°ä¸šåŠ¡é€»è¾‘ã€‚
4.  åˆ›å»º `internal/domain/mall/router.go` æš´éœ²è·¯ç”±æ³¨å†Œå‡½æ•° `SetupMallRoutes`ã€‚
5.  åœ¨ `cmd/server/main.go` ä¸­è°ƒç”¨ `SetupMallRoutes`ã€‚

---
**Happy Coding!** ğŸš€
